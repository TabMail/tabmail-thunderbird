<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="popup.css"/>
</head>
<body>
    <div id="popup-content">
        <div id="server-status-warning" style="display: none;">
            <div id="server-status-text">⚠️ Connection issues with TabMail servers</div>
            <a id="server-status-link" href="#" target="_blank">Check Server Status →</a>
        </div>
        <div id="usage-container">
            <progress id="usage-bar" value="0" max="100"></progress>
            <div id="usage-label">Monthly usage: N/A</div>
            <div id="usage-reset">Resets N/A</div>
            <div id="subscription-status" style="display: none;"></div>
        </div>
        <div id="auth-status-container">
            <div id="auth-status-text">Checking signin...</div>
            <button id="auth-action-btn" disabled>Sign out</button>
            <div class="auth-preference">
                <label>
                    <input type="checkbox" id="auto-reauth-checkbox" checked>
                    <span>Attempt automatic signin</span>
                </label>
            </div>
        </div>
        <div id="consent-warning" style="display: none; margin: 8px 0; padding: 12px; background-color: color-mix(in srgb, var(--tag-tm-archive) var(--tm-opacity-subtle-light), transparent); border-left: 4px solid var(--tag-tm-archive); border-radius: 4px; text-align: left;">
            <strong style="color: var(--tag-tm-archive); display: block; margin-bottom: 6px;">Consent required</strong>
            <div style="font-size: 0.9em; margin-bottom: 8px;">
                Please confirm you’re 18+ and accept the Terms/Privacy to enable TabMail.
            </div>
            <button id="open-consent-from-warning" style="padding: 6px 12px; background-color: var(--tag-tm-archive); color: var(--in-content-page-color); border: none; border-radius: 4px; cursor: pointer;">
                Open Consent Page
            </button>
        </div>
        <div id="setup-warning" style="display: none; margin: 8px 0; padding: 12px; background-color: color-mix(in srgb, var(--tag-tm-archive) var(--tm-opacity-subtle-light), transparent); border-left: 4px solid var(--tag-tm-archive); border-radius: 4px;">
            <strong style="color: var(--tag-tm-archive); display: block; margin-bottom: 8px;">⚠️ Configuration Required</strong>
            <div id="setup-warning-items" style="font-size: 0.9em;"></div>
            <button id="open-configs-from-warning" style="margin-top: 8px; padding: 6px 12px; background-color: var(--tag-tm-archive); color: white; border: none; border-radius: 4px; cursor: pointer;">Open Settings to Configure</button>
        </div>
        <div id="popup-nav">
            <a id="open-chat-window" class="popup-link" href="#">Chat <span id="chat-hotkey"></span></a>
            <a id="open-configs" class="popup-link" href="#">Settings</a>
            <a id="open-prompts" class="popup-link" href="#">Prompts</a>
            <a id="open-templates" class="popup-link" href="#">Templates</a>
        </div>
        <p id="status"></p>
        <div id="debug-mode-indicator" style="display: none;">Debug Mode</div>
    </div>
    <div id="fts-status-banner">
        <div id="fts-status-text"></div>
        <div id="fts-status-progress"></div>
    </div>
    <div id="version-status-banner">
        <span id="version-text"></span>
        <span id="check-updates-link">Check for updates</span>
    </div>
    <script type="module" src="popup.js"></script>
</body>
</html>
